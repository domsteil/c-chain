{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from 'axios';\nimport { deflateSync } from 'zlib';\nimport Web3 from 'web3';\nimport Fortmatic from 'fortmatic';\nimport useUrsula from \"../useUrsula\";\nimport useFetch from \"../useFetch\";\nvar web3;\nvar state;\nvar captureFile;\nvar onSubmit;\nvar uploadFile;\nvar hash;\nvar address;\nvar fm = new Fortmatic('pk_test_F4970AF6BBC7F0C1');\n\nif (process.browser) {\n  web3 = new Web3(fm.getProvider());\n}\n\nfunction useAsyncEndpoint(fn) {\n  var _this = this;\n\n  var _useState = useState({\n    data: null,\n    pending: deflateSync,\n    completed: false,\n    error: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      res = _useState2[0],\n      setRes = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      req = _useState4[0],\n      setReq = _useState4[1];\n\n  state = {\n    ipfsHash: null,\n    buffer: '',\n    ethAddress: '',\n    transactionHash: '',\n    txReceipt: ''\n  }; //Take file input from user\n\n  captureFile = function captureFile(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    var file = event.target.files[0];\n    var reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = function () {\n      return _this.convertToBuffer(reader);\n    };\n  };\n\n  decryptData = useFetch(\"http://ec2-18-204-34-34.compute-1.amazonaws.com:5000/decrypt\" + {\n    hash: hash\n  });\n\n  onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var accounts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.next = 3;\n              return web3.eth.getAccounts();\n\n            case 3:\n              accounts = _context.sent;\n              _context.next = 6;\n              return ipfs.add(_this.state.buffer, function (err, ipfsHash) {\n                console.log(err, ipfsHash); //setState by setting ipfsHash to ipfsHash[0].hash\n\n                _this.setState({\n                  ipfsHash: ipfsHash[0].hash\n                });\n\n                storehash.methods.sendHash(_this.state.ipfsHash).send({\n                  from: accounts[0]\n                }, function (error, transactionHash) {\n                  console.log(transactionHash);\n\n                  _this.setState({\n                    transactionHash: transactionHash\n                  });\n                });\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (!req) return;\n    setRes({\n      data: null,\n      pending: true,\n      completed: false,\n      error: false\n    });\n    axios(req).then(function (res) {\n      return setRes({\n        data: res.data,\n        pending: false,\n        error: false,\n        complete: true\n      });\n    }).catch(function () {\n      return setRes({\n        data: null,\n        pending: false,\n        error: true,\n        complete: true\n      });\n    });\n  }, [req]);\n  return [res, function () {\n    return setReq(fn.apply(void 0, arguments));\n  }];\n}\n\nfunction retrieveData() {\n  return us;\n}\n\nvar handlePersonalSign = function handlePersonalSign(e) {\n  var message = message;\n  web3.eth.getAccounts(function (err, accounts) {\n    if (err) return console.error(err);\n    var from = accounts[0];\n    var params = [message, from];\n    var method = 'personal_sign';\n    web3.currentProvider.sendAsync({\n      id: 1,\n      method: method,\n      params: params,\n      from: from\n    }, function (err, result) {\n      if (err) return console.error(err);\n      if (result.error) return console.error(result.error);\n      console.log(result);\n    });\n  });\n};\n\nvar decryptAPI = \"http://ec2-18-204-34-34.compute-1.amazonaws.com:5000/decrypt\" + {\n  hash: hash\n};\n\nfunction decryptData() {\n  return useAsyncEndpoint(function (data) {\n    return {\n      url: decryptAPI,\n      method: \"GET\",\n      data: data\n    };\n  });\n}\n\nexport default function DecryptBar(props) {\n  var _useState5 = useState(\"Public Key for re-encryption\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      hash = _useState8[0],\n      setHash = _useState8[1];\n\n  var handleKeyPress = function handleKeyPress(event) {\n    if (event.key == 'Enter' || event.keyCode == 13) {\n      decryptData();\n    }\n  };\n\n  return React.createElement(\"section\", {\n    className: \"jsx-1447952807\"\n  }, React.createElement(\"div\", {\n    className: \"jsx-1447952807\" + \" \" + \"row\"\n  }, React.createElement(\"div\", {\n    className: \"jsx-1447952807\" + \" \" + \"column\"\n  }, React.createElement(\"form\", {\n    id: \"ipfs-hash-form\",\n    className: \"jsx-1447952807\"\n  }, React.createElement(\"select\", {\n    className: \"jsx-1447952807\" + \" \" + \"policyDropdown\"\n  }, React.createElement(\"option\", {\n    value: \"policy-1\",\n    className: \"jsx-1447952807\"\n  }, \"Policy-1\"), React.createElement(\"option\", {\n    value: \"policy-2\",\n    className: \"jsx-1447952807\"\n  }, \"Policy-2\")), React.createElement(\"input\", {\n    type: \"file\",\n    className: \"jsx-1447952807\" + \" \" + \"ipfsInput\"\n  }), React.createElement(\"button\", {\n    onClick: \"upload\",\n    className: \"jsx-1447952807\" + \" \" + \"policyButton\"\n  }, \"Upload\"), React.createElement(\"img\", {\n    src: \"../static/verification.png\",\n    height: \"28\",\n    width: \"28\",\n    align: \"middle\",\n    alt: \"\",\n    className: \"jsx-1447952807\" + \" \" + \"center\"\n  })), React.createElement(\"br\", {\n    className: \"jsx-1447952807\"\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    onKeyPress: handleKeyPress,\n    className: \"jsx-1447952807\" + \" \" + \"message-box\"\n  }), React.createElement(\"a\", {\n    className: \"jsx-1447952807\"\n  }, React.createElement(\"button\", {\n    onClick: decryptData,\n    invert: true,\n    className: \"jsx-1447952807\" + \" \" + \"policyButton\"\n  }, \"Decrypt\"), React.createElement(\"img\", {\n    src: \"../static/verification.png\",\n    height: \"28\",\n    width: \"28\",\n    align: \"middle\",\n    alt: \"\",\n    className: \"jsx-1447952807\" + \" \" + \"center\"\n  })))), React.createElement(_JSXStyle, {\n    id: \"1447952807\"\n  }, \".column.jsx-1447952807{text-align:center;border-width:1px;list-style:none;padding-bottom:8px;padding-top:8px;margin-right:28px;}.center.jsx-1447952807{margin-left:3px;margin-bottom:10px;}.to.jsx-1447952807{width:260px;padding-bottom:8px;padding-top:8px;border:1px solid #d0d4d9;border-radius:.375rem;-webkit-box-shadow:inset 0 -1px 0 0 rgba(100,121,143,0.122);box-shadow:inset 0 -1px 0 0 rgba(100,121,143,0.122);line-height:20px;min-height:auto;padding-left:0;padding-right:0;}.policyButton.jsx-1447952807{-webkit-appearance:none;position:relative;display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:120px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:rgb(102,102,102);background-color:rgb(255,255,255);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.policyDropdown.jsx-1447952807{display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:120px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:rgb(102,102,102);background-color:rgb(255,255,255);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.ipfsInput.jsx-1447952807{-webkit-appearance:none;position:relative;display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:300px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.message-box.jsx-1447952807{padding-bottom:28px;width:800px;overflow:auto;margin:0;min-height:42px;height:38px;max-height:180px;border:2px solid rgba(134,134,134,.7);border-radius:.375rem;outline:0;background:#fff;resize:none;box-shadow:none;color:#1d1c1d;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;padding:9px 30px 10px 50px;\\\"      }      .login {        color: #FFF;      }      .account {        font-size: 13px;        line-height: 1.91667;        font-weight: 400;        color: #3d464d;        border: 1px solid #bdc4c9;        padding: 3.5px 7px;        border-radius: 4px;        margin-top: 28px;        margin-left: 8px;      }      .row {        flex-direction: column;        margin: -1.5rem 0;        text-align: center;      }      // CSS only media query for tablet      @media screen and (max-width: 960px) {        .row {          flex-direction: column;          margin: -1.5rem 0;        }        .column {          width: 10%;          padding: 1.5rem 0;          text-align: center;          max-width: 100px;        }        .message-box {          padding-bottom: 28px;          width: 100px;          overflow: auto;          margin: 0;           min-height: 42px;           height: 38px;           max-height: 180px;           border: 2px solid rgba(134,134,134,.7);          border-radius: .375rem;          outline: 0;          background: #FFFFFF;          resize: none;          box-shadow: none;          color: #1d1c1d;          -webkit-user-select: auto;          -moz-user-select: auto;          -ms-user-select: auto;          user-select: auto;          padding: 9px 30px 10px 50px;          display: none;        }              };}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxjLWNoYWluXFxjb21wb25lbnRzXFxtZXNzYWdlc1xcRGVjcnlwdEJhci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4S29CLEFBSTJCLEFBU0YsQUFLSixBQWNZLEFBK0JILEFBOEJHLEFBK0JKLFlBekdELElBTEEsRUFURixFQXdISixDQTdEUyxHQS9CSixBQTZEQSxPQTFFRixDQTBHRixHQXhIRSxBQVNsQixPQW1CdUIsQUE2REEsQ0E5QkksR0E4RGhCLENBMUdnQixJQWROLElBeUhILFFBN0ZNLEFBNkRBLEtBOUJKLEVBMURGLENBeUhKLENBM0dVLFdBNEdMLEVBOUZRLEFBNkRBLENBeEZQLEFBMERKLFFBNUM4QyxNQTZDekMsQUErRG1CLElBekh4QyxNQTJCb0IsQUE2REEsU0E3Qk4sU0EvQkUsQUE2REEsR0E3QkYsT0E4RFUsSUE3RkgsQUE2REEsQ0E3QkgsV0EvQ29DLEtBZ0RwQyxDQTZETixDQTdGRSxBQTZEQSxTQWlDSSxHQTdGSixBQTZEQSxFQTdCRyxVQS9CQyxBQTZEQSxDQWdDSixJQTdEYSxRQThEVCxHQTdGQSxBQTZEQSxLQS9FQyxPQWtEbUIsQ0E4RHRCLEdBN0ZDLEFBNkRBLE1BL0VDLEtBZ0hTLElBN0ZBLEFBNkRkLE9BL0VJLElBZ0ZFLElBL0JBLE1BK0RLLENBL0dOLENBa0JvQixlQWpCdEMsS0ErR3VCLGNBN0ZKLE9BOEZBLGdDQWpDRixJQS9CQSxXQWdDTSxJQS9CQSwyQkE5Qk4sT0E4RlksUUE3Rk4sSUE2REosSUEvQkEsV0E4SHJCLEVBOUZzQixJQS9CQSxjQWdDQSxJQS9CQSxPQS9CRCxPQStEQSxJQS9CQSxNQS9CQyxPQStEQyxJQS9CQSxPQS9CRCxRQStEYyxJQS9CQSxNQS9CZixpQkFDRSxHQThERSxJQS9CQSxZQTlCVyxLQThESixJQS9CQSxxQkE5QlAscUJBQ08sa0JBNkRaLElBL0JBLFlBZ0NILElBL0JBLFNBaUNmLElBaENBLGFBL0JrQixnQkFDSCxhQUNmLG9qQ0FpSkQiLCJmaWxlIjoiQzpcXGMtY2hhaW5cXGNvbXBvbmVudHNcXG1lc3NhZ2VzXFxEZWNyeXB0QmFyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBkZWZsYXRlU3luYyB9IGZyb20gJ3psaWInO1xyXG5pbXBvcnQgV2ViMyBmcm9tICd3ZWIzJztcclxuaW1wb3J0IEZvcnRtYXRpYyBmcm9tICdmb3J0bWF0aWMnO1xyXG5pbXBvcnQgdXNlVXJzdWxhIGZyb20gXCIuLi91c2VVcnN1bGFcIjtcclxuaW1wb3J0IHVzZUZldGNoIGZyb20gXCIuLi91c2VGZXRjaFwiO1xyXG5cclxudmFyIHdlYjM7XHJcbnZhciBzdGF0ZTtcclxudmFyIGNhcHR1cmVGaWxlO1xyXG52YXIgb25TdWJtaXQ7XHJcbnZhciB1cGxvYWRGaWxlO1xyXG52YXIgaGFzaDtcclxuXHJcbnZhciBhZGRyZXNzO1xyXG5sZXQgZm0gPSBuZXcgRm9ydG1hdGljKCdwa190ZXN0X0Y0OTcwQUY2QkJDN0YwQzEnKTtcclxuXHJcbmlmIChwcm9jZXNzLmJyb3dzZXIpIHtcclxuICB3ZWIzID0gbmV3IFdlYjMoZm0uZ2V0UHJvdmlkZXIoKSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB1c2VBc3luY0VuZHBvaW50KGZuKSB7XHJcbiAgY29uc3QgW3Jlcywgc2V0UmVzXSA9IHVzZVN0YXRlKHtcclxuICAgIGRhdGE6IG51bGwsXHJcbiAgICBwZW5kaW5nOiBkZWZsYXRlU3luYyxcclxuICAgIGNvbXBsZXRlZDogZmFsc2UsXHJcbiAgICBlcnJvcjogZmFsc2UsXHJcbiAgfSk7XHJcbiAgY29uc3QgW3JlcSwgc2V0UmVxXSA9IHVzZVN0YXRlKCk7XHJcblxyXG4gIHN0YXRlID0ge1xyXG4gICAgaXBmc0hhc2g6bnVsbCxcclxuICAgIGJ1ZmZlcjonJyxcclxuICAgIGV0aEFkZHJlc3M6JycsXHJcbiAgICB0cmFuc2FjdGlvbkhhc2g6JycsXHJcbiAgICB0eFJlY2VpcHQ6ICcnXHJcbiAgfTtcclxuXHJcbi8vVGFrZSBmaWxlIGlucHV0IGZyb20gdXNlclxyXG4gY2FwdHVyZUZpbGUgPShldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF1cclxuICAgICAgbGV0IHJlYWRlciA9IG5ldyB3aW5kb3cuRmlsZVJlYWRlcigpXHJcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKVxyXG4gICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4gdGhpcy5jb252ZXJ0VG9CdWZmZXIocmVhZGVyKVxyXG4gICAgfTtcclxuXHJcblxyXG5kZWNyeXB0RGF0YSA9IHVzZUZldGNoKFwiaHR0cDovL2VjMi0xOC0yMDQtMzQtMzQuY29tcHV0ZS0xLmFtYXpvbmF3cy5jb206NTAwMC9kZWNyeXB0XCIgKyB7aGFzaH0pO1xyXG5cclxub25TdWJtaXQgPSBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3ZWIzLmV0aC5nZXRBY2NvdW50cygpO1xyXG4gICAgLy9zYXZlIGRvY3VtZW50IHRvIElQRlMscmV0dXJuIGl0cyBoYXNoIywgYW5kIHNldCBoYXNoIyB0byBzdGF0ZVxyXG4gICAgICBhd2FpdCBpcGZzLmFkZCh0aGlzLnN0YXRlLmJ1ZmZlciwgKGVyciwgaXBmc0hhc2gpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIsaXBmc0hhc2gpO1xyXG4gICAgICAgIC8vc2V0U3RhdGUgYnkgc2V0dGluZyBpcGZzSGFzaCB0byBpcGZzSGFzaFswXS5oYXNoXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlwZnNIYXNoOmlwZnNIYXNoWzBdLmhhc2ggfSk7XHJcbiAgICAgICAgc3RvcmVoYXNoLm1ldGhvZHMuc2VuZEhhc2godGhpcy5zdGF0ZS5pcGZzSGFzaCkuc2VuZCh7XHJcbiAgICAgICAgICBmcm9tOiBhY2NvdW50c1swXVxyXG4gICAgICAgIH0sIChlcnJvciwgdHJhbnNhY3Rpb25IYXNoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0cmFuc2FjdGlvbkhhc2gpO1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dHJhbnNhY3Rpb25IYXNofSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9O1xyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXJlcSkgcmV0dXJuO1xyXG4gICAgc2V0UmVzKHtcclxuICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgcGVuZGluZzogdHJ1ZSxcclxuICAgICAgY29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgYXhpb3MocmVxKVxyXG4gIC50aGVuKHJlcyA9PlxyXG4gICAgc2V0UmVzKHtcclxuICAgICAgZGF0YTogcmVzLmRhdGEsXHJcbiAgICAgIHBlbmRpbmc6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZmFsc2UsXHJcbiAgICAgIGNvbXBsZXRlOiB0cnVlXHJcbiAgICB9KSxcclxuICApXHJcbiAgLmNhdGNoKCgpID0+XHJcbiAgICBzZXRSZXMoe1xyXG4gICAgICBkYXRhOiBudWxsLFxyXG4gICAgICBwZW5kaW5nOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IHRydWUsXHJcbiAgICAgIGNvbXBsZXRlOiB0cnVlXHJcbiAgICB9KSxcclxuICApO1xyXG59LCBbcmVxXVxyXG4pO1xyXG5yZXR1cm4gW3JlcywgKC4uLmFyZ3MpID0+IHNldFJlcShmbiguLi5hcmdzKSldO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcmV0cmlldmVEYXRhKCkge1xyXG5cclxuICByZXR1cm4gdXNcclxufVxyXG5cclxubGV0IGhhbmRsZVBlcnNvbmFsU2lnbiA9IChlKSA9PiB7XHJcbiAgbGV0IG1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gIHdlYjMuZXRoLmdldEFjY291bnRzKChlcnIsIGFjY291bnRzKSA9PiB7XHJcbiAgICBpZiAoZXJyKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgdmFyIGZyb20gPSBhY2NvdW50c1swXTtcclxuICAgIHZhciBwYXJhbXMgPSBbbWVzc2FnZSwgZnJvbV07XHJcbiAgICB2YXIgbWV0aG9kID0gJ3BlcnNvbmFsX3NpZ24nO1xyXG4gICAgd2ViMy5jdXJyZW50UHJvdmlkZXIuc2VuZEFzeW5jKHtcclxuICAgICAgaWQ6IDEsXHJcbiAgICAgIG1ldGhvZCxcclxuICAgICAgcGFyYW1zLFxyXG4gICAgICBmcm9tLFxyXG4gICAgfSwgKGVyciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKHJlc3VsdC5lcnJvcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICB9KVxyXG4gIH0pO1xyXG59O1xyXG5cclxuXHJcblxyXG5jb25zdCBkZWNyeXB0QVBJID0gXCJodHRwOi8vZWMyLTE4LTIwNC0zNC0zNC5jb21wdXRlLTEuYW1hem9uYXdzLmNvbTo1MDAwL2RlY3J5cHRcIiArIHtoYXNofTtcclxuXHJcbmZ1bmN0aW9uIGRlY3J5cHREYXRhKCkge1xyXG4gIFxyXG4gIHJldHVybiB1c2VBc3luY0VuZHBvaW50KGRhdGEgPT4gKHtcclxuICB1cmw6IGRlY3J5cHRBUEksXHJcbiAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gIGRhdGFcclxufSkpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEZWNyeXB0QmFyKHByb3BzKSB7XHJcbiAgY29uc3QgW3Bhc3N3b3JkLCBzZXRQYXNzd29yZF0gPSB1c2VTdGF0ZShcIlB1YmxpYyBLZXkgZm9yIHJlLWVuY3J5cHRpb25cIik7XHJcbiAgY29uc3QgW2hhc2gsIHNldEhhc2hdID0gdXNlU3RhdGUoXCJcIilcclxuXHJcbiAgY29uc3QgaGFuZGxlS2V5UHJlc3MgPSAoZXZlbnQpID0+IHtcclxuICBpZihldmVudC5rZXkgPT0gJ0VudGVyJ3x8IGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcclxuICAgIGRlY3J5cHREYXRhKCk7XHJcbiAgfVxyXG59XHJcblxyXG5yZXR1cm4gKFxyXG4gICAgPHNlY3Rpb24+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sdW1uXCI+XHJcbiAgICAgICAgPGZvcm0gaWQ9XCJpcGZzLWhhc2gtZm9ybVwiPlxyXG4gICAgICAgIDxzZWxlY3QgY2xhc3NOYW1lPVwicG9saWN5RHJvcGRvd25cIj5cclxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJwb2xpY3ktMVwiPlBvbGljeS0xPC9vcHRpb24+XHJcbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicG9saWN5LTJcIj5Qb2xpY3ktMjwvb3B0aW9uPlxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJpcGZzSW5wdXRcIlxyXG4gICAgICAgIHR5cGUgPSBcImZpbGVcIlxyXG4gICAgICBcclxuICAgICAgICAvPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicG9saWN5QnV0dG9uXCIgb25DbGljaz1cInVwbG9hZFwiPiBcclxuICAgICAgICBVcGxvYWRcclxuICAgICAgICA8L2J1dHRvbj48aW1nIGNsYXNzTmFtZT1cImNlbnRlclwiIHNyYz1cIi4uL3N0YXRpYy92ZXJpZmljYXRpb24ucG5nXCIgaGVpZ2h0PVwiMjhcIiB3aWR0aD1cIjI4XCIgYWxpZ249XCJtaWRkbGVcIiBhbHQ9XCJcIi8+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAgPGlucHV0IGNsYXNzTmFtZT1cIm1lc3NhZ2UtYm94XCIgdHlwZT1cInBhc3N3b3JkXCIgdmFsdWU9e3Bhc3N3b3JkfSBvbkNoYW5nZT17ZSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9IG9uS2V5UHJlc3M9e2hhbmRsZUtleVByZXNzfSAgLz4gXHJcbiAgICAgICAgPGE+PGJ1dHRvbiBvbkNsaWNrPXtkZWNyeXB0RGF0YX0gY2xhc3NOYW1lPVwicG9saWN5QnV0dG9uXCIgaW52ZXJ0ID5EZWNyeXB0PC9idXR0b24+PGltZyBjbGFzc05hbWU9XCJjZW50ZXJcIiBzcmM9XCIuLi9zdGF0aWMvdmVyaWZpY2F0aW9uLnBuZ1wiIGhlaWdodD1cIjI4XCIgd2lkdGg9XCIyOFwiIGFsaWduPVwibWlkZGxlXCIgYWx0PVwiXCIvPjwvYT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8c3R5bGUganN4PntgXHJcblxyXG4gICAgICAuY29sdW1uIHtcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcclxuICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xyXG4gICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAyOHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuY2VudGVyIHtcclxuICAgICAgICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC50byB7XHJcbiAgICAgICAgd2lkdGg6IDI2MHB4O1xyXG4gICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XHJcbiAgICAgICAgcGFkZGluZy10b3A6IDhweDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDBkNGQ5OyBcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAuMzc1cmVtO1xyXG4gICAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAtMXB4IDAgMCByZ2JhKDEwMCwxMjEsMTQzLDAuMTIyKTtcclxuICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIC0xcHggMCAwIHJnYmEoMTAwLDEyMSwxNDMsMC4xMjIpO1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgICAgIG1pbi1oZWlnaHQ6IGF1dG87IFxyXG4gICAgICAgIHBhZGRpbmctbGVmdDogMDsgXHJcbiAgICAgICAgcGFkZGluZy1yaWdodDogMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLnBvbGljeUJ1dHRvbiB7XHJcbiAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBsaW5lLWhlaWdodDogMDtcclxuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgIHdpZHRoOiAxMjBweDtcclxuICAgICAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICBjb2xvcjogcmdiKDEwMiwgMTAyLCAxMDIpO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTtcclxuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgICAgIHBhZGRpbmc6IDBweCAxMHB4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgICAgICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICAgICAgICBib3JkZXItY29sb3I6IHJnYigyMzQsIDIzNCwgMjM0KTtcclxuICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZSAwcztcclxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5wb2xpY3lEcm9wZG93biB7XHJcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6IDA7XHJcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgICAgICB3aWR0aDogMTIwcHg7XHJcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgY29sb3I6IHJnYigxMDIsIDEwMiwgMTAyKTtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XHJcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgICAgICBwYWRkaW5nOiAwcHggMTBweDtcclxuICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgIGJvcmRlci13aWR0aDogMXB4O1xyXG4gICAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2IoMjM0LCAyMzQsIDIzNCk7XHJcbiAgICAgICAgYm9yZGVyLWltYWdlOiBpbml0aWFsO1xyXG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UgMHM7XHJcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBcclxuICAgICAgLmlwZnNJbnB1dCB7XHJcbiAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBsaW5lLWhlaWdodDogMDtcclxuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgIHdpZHRoOiAzMDBweDtcclxuICAgICAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICBjb2xvcjogIzAwMDtcclxuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgICAgIHBhZGRpbmc6IDBweCAxMHB4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgICAgICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICAgICAgICBib3JkZXItY29sb3I6IHJnYigyMzQsIDIzNCwgMjM0KTtcclxuICAgICAgICBib3JkZXItaW1hZ2U6IGluaXRpYWw7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZSAwcztcclxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5tZXNzYWdlLWJveCB7XHJcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDI4cHg7XHJcbiAgICAgICAgd2lkdGg6IDgwMHB4IDtcclxuICAgICAgICBvdmVyZmxvdzogYXV0bztcclxuICAgICAgICBtYXJnaW46IDA7IFxyXG4gICAgICAgIG1pbi1oZWlnaHQ6IDQycHg7IFxyXG4gICAgICAgIGhlaWdodDogMzhweDsgXHJcbiAgICAgICAgbWF4LWhlaWdodDogMTgwcHg7IFxyXG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMTM0LDEzNCwxMzQsLjcpO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IC4zNzVyZW07XHJcbiAgICAgICAgb3V0bGluZTogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgICAgIHJlc2l6ZTogbm9uZTtcclxuICAgICAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgICAgIGNvbG9yOiAjMWQxYzFkO1xyXG4gICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgICAgICAgLW1vei11c2VyLXNlbGVjdDogYXV0bztcclxuICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgICAgICAgdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgICAgICAgcGFkZGluZzogOXB4IDMwcHggMTBweCA1MHB4O1wiXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5sb2dpbiB7XHJcbiAgICAgICAgY29sb3I6ICNGRkY7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hY2NvdW50IHtcclxuICAgICAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuOTE2Njc7XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgICAgICBjb2xvcjogIzNkNDY0ZDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjYmRjNGM5O1xyXG4gICAgICAgIHBhZGRpbmc6IDMuNXB4IDdweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogMjhweDtcclxuICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAucm93IHtcclxuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgIG1hcmdpbjogLTEuNXJlbSAwO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ1NTIG9ubHkgbWVkaWEgcXVlcnkgZm9yIHRhYmxldFxyXG4gICAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5NjBweCkge1xyXG4gICAgICAgIC5yb3cge1xyXG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgIG1hcmdpbjogLTEuNXJlbSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29sdW1uIHtcclxuICAgICAgICAgIHdpZHRoOiAxMCU7XHJcbiAgICAgICAgICBwYWRkaW5nOiAxLjVyZW0gMDtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgIG1heC13aWR0aDogMTAwcHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAubWVzc2FnZS1ib3gge1xyXG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDI4cHg7XHJcbiAgICAgICAgICB3aWR0aDogMTAwcHg7XHJcbiAgICAgICAgICBvdmVyZmxvdzogYXV0bztcclxuICAgICAgICAgIG1hcmdpbjogMDsgXHJcbiAgICAgICAgICBtaW4taGVpZ2h0OiA0MnB4OyBcclxuICAgICAgICAgIGhlaWdodDogMzhweDsgXHJcbiAgICAgICAgICBtYXgtaGVpZ2h0OiAxODBweDsgXHJcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDEzNCwxMzQsMTM0LC43KTtcclxuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IC4zNzVyZW07XHJcbiAgICAgICAgICBvdXRsaW5lOiAwO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogI0ZGRkZGRjtcclxuICAgICAgICAgIHJlc2l6ZTogbm9uZTtcclxuICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgICAgICBjb2xvcjogIzFkMWMxZDtcclxuICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBhdXRvO1xyXG4gICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBhdXRvO1xyXG4gICAgICAgICAgdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgICAgICAgICBwYWRkaW5nOiA5cHggMzBweCAxMHB4IDUwcHg7XHJcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbilcclxuXHJcbiAgICB9XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\c-chain\\\\components\\\\messages\\\\DecryptBar.js */\"));\n}","map":{"version":3,"sources":["C:\\c-chain\\components\\messages\\DecryptBar.js"],"names":["React","useState","useEffect","useRef","axios","deflateSync","Web3","Fortmatic","useUrsula","useFetch","web3","state","captureFile","onSubmit","uploadFile","hash","address","fm","process","browser","getProvider","useAsyncEndpoint","fn","data","pending","completed","error","res","setRes","req","setReq","ipfsHash","buffer","ethAddress","transactionHash","txReceipt","event","stopPropagation","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","convertToBuffer","decryptData","eth","getAccounts","accounts","ipfs","add","err","console","log","setState","storehash","methods","sendHash","send","from","then","complete","catch","retrieveData","us","handlePersonalSign","e","message","params","method","currentProvider","sendAsync","id","result","decryptAPI","url","DecryptBar","props","password","setPassword","setHash","handleKeyPress","key","keyCode","value"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,MAA5B;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,QAAP,MAAqB,aAArB;AAEA,IAAIC,IAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,WAAJ;AACA,IAAIC,QAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,IAAJ;AAEA,IAAIC,OAAJ;AACA,IAAIC,EAAE,GAAG,IAAIV,SAAJ,CAAc,0BAAd,CAAT;;AAEA,IAAIW,OAAO,CAACC,OAAZ,EAAqB;AACnBT,EAAAA,IAAI,GAAG,IAAIJ,IAAJ,CAASW,EAAE,CAACG,WAAH,EAAT,CAAP;AACD;;AAGD,SAASC,gBAAT,CAA0BC,EAA1B,EAA8B;AAAA;;AAAA,kBACNrB,QAAQ,CAAC;AAC7BsB,IAAAA,IAAI,EAAE,IADuB;AAE7BC,IAAAA,OAAO,EAAEnB,WAFoB;AAG7BoB,IAAAA,SAAS,EAAE,KAHkB;AAI7BC,IAAAA,KAAK,EAAE;AAJsB,GAAD,CADF;AAAA;AAAA,MACrBC,GADqB;AAAA,MAChBC,MADgB;;AAAA,mBAON3B,QAAQ,EAPF;AAAA;AAAA,MAOrB4B,GAPqB;AAAA,MAOhBC,MAPgB;;AAS5BnB,EAAAA,KAAK,GAAG;AACNoB,IAAAA,QAAQ,EAAC,IADH;AAENC,IAAAA,MAAM,EAAC,EAFD;AAGNC,IAAAA,UAAU,EAAC,EAHL;AAINC,IAAAA,eAAe,EAAC,EAJV;AAKNC,IAAAA,SAAS,EAAE;AALL,GAAR,CAT4B,CAiB9B;;AACCvB,EAAAA,WAAW,GAAE,qBAACwB,KAAD,EAAW;AACnBA,IAAAA,KAAK,CAACC,eAAN;AACAD,IAAAA,KAAK,CAACE,cAAN;AACA,QAAMC,IAAI,GAAGH,KAAK,CAACI,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AACA,QAAIC,MAAM,GAAG,IAAIC,MAAM,CAACC,UAAX,EAAb;AACAF,IAAAA,MAAM,CAACG,iBAAP,CAAyBN,IAAzB;;AACAG,IAAAA,MAAM,CAACI,SAAP,GAAmB;AAAA,aAAM,KAAI,CAACC,eAAL,CAAqBL,MAArB,CAAN;AAAA,KAAnB;AACD,GAPJ;;AAUDM,EAAAA,WAAW,GAAGvC,QAAQ,CAAC,iEAAiE;AAACM,IAAAA,IAAI,EAAJA;AAAD,GAAlE,CAAtB;;AAEAF,EAAAA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,iBAAOuB,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACLA,cAAAA,KAAK,CAACE,cAAN;AADK;AAAA,qBAEkB5B,IAAI,CAACuC,GAAL,CAASC,WAAT,EAFlB;;AAAA;AAECC,cAAAA,QAFD;AAAA;AAAA,qBAICC,IAAI,CAACC,GAAL,CAAS,KAAI,CAAC1C,KAAL,CAAWqB,MAApB,EAA4B,UAACsB,GAAD,EAAMvB,QAAN,EAAmB;AACnDwB,gBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAAgBvB,QAAhB,EADmD,CAEnD;;AACA,gBAAA,KAAI,CAAC0B,QAAL,CAAc;AAAE1B,kBAAAA,QAAQ,EAACA,QAAQ,CAAC,CAAD,CAAR,CAAYhB;AAAvB,iBAAd;;AACA2C,gBAAAA,SAAS,CAACC,OAAV,CAAkBC,QAAlB,CAA2B,KAAI,CAACjD,KAAL,CAAWoB,QAAtC,EAAgD8B,IAAhD,CAAqD;AACnDC,kBAAAA,IAAI,EAAEX,QAAQ,CAAC,CAAD;AADqC,iBAArD,EAEG,UAACzB,KAAD,EAAQQ,eAAR,EAA4B;AAC7BqB,kBAAAA,OAAO,CAACC,GAAR,CAAYtB,eAAZ;;AACA,kBAAA,KAAI,CAACuB,QAAL,CAAc;AAACvB,oBAAAA,eAAe,EAAfA;AAAD,mBAAd;AACD,iBALD;AAMD,eAVK,CAJD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA;AAAA;AAAA;AAAA,KAAR;;AAiBEhC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAAC2B,GAAL,EAAU;AACVD,IAAAA,MAAM,CAAC;AACLL,MAAAA,IAAI,EAAE,IADD;AAELC,MAAAA,OAAO,EAAE,IAFJ;AAGLC,MAAAA,SAAS,EAAE,KAHN;AAILC,MAAAA,KAAK,EAAE;AAJF,KAAD,CAAN;AAMFtB,IAAAA,KAAK,CAACyB,GAAD,CAAL,CACCkC,IADD,CACM,UAAApC,GAAG;AAAA,aACPC,MAAM,CAAC;AACLL,QAAAA,IAAI,EAAEI,GAAG,CAACJ,IADL;AAELC,QAAAA,OAAO,EAAE,KAFJ;AAGLE,QAAAA,KAAK,EAAE,KAHF;AAILsC,QAAAA,QAAQ,EAAE;AAJL,OAAD,CADC;AAAA,KADT,EASCC,KATD,CASO;AAAA,aACLrC,MAAM,CAAC;AACLL,QAAAA,IAAI,EAAE,IADD;AAELC,QAAAA,OAAO,EAAE,KAFJ;AAGLE,QAAAA,KAAK,EAAE,IAHF;AAILsC,QAAAA,QAAQ,EAAE;AAJL,OAAD,CADD;AAAA,KATP;AAiBD,GAzBU,EAyBR,CAACnC,GAAD,CAzBQ,CAAT;AA2BF,SAAO,CAACF,GAAD,EAAM;AAAA,WAAaG,MAAM,CAACR,EAAE,MAAF,mBAAD,CAAnB;AAAA,GAAN,CAAP;AAEC;;AAED,SAAS4C,YAAT,GAAwB;AAEtB,SAAOC,EAAP;AACD;;AAED,IAAIC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,CAAD,EAAO;AAC9B,MAAIC,OAAO,GAAGA,OAAd;AACA5D,EAAAA,IAAI,CAACuC,GAAL,CAASC,WAAT,CAAqB,UAACI,GAAD,EAAMH,QAAN,EAAmB;AACtC,QAAIG,GAAJ,EAAS,OAAOC,OAAO,CAAC7B,KAAR,CAAc4B,GAAd,CAAP;AACT,QAAIQ,IAAI,GAAGX,QAAQ,CAAC,CAAD,CAAnB;AACA,QAAIoB,MAAM,GAAG,CAACD,OAAD,EAAUR,IAAV,CAAb;AACA,QAAIU,MAAM,GAAG,eAAb;AACA9D,IAAAA,IAAI,CAAC+D,eAAL,CAAqBC,SAArB,CAA+B;AAC7BC,MAAAA,EAAE,EAAE,CADyB;AAE7BH,MAAAA,MAAM,EAANA,MAF6B;AAG7BD,MAAAA,MAAM,EAANA,MAH6B;AAI7BT,MAAAA,IAAI,EAAJA;AAJ6B,KAA/B,EAKG,UAACR,GAAD,EAAMsB,MAAN,EAAiB;AAClB,UAAItB,GAAJ,EAAS,OAAOC,OAAO,CAAC7B,KAAR,CAAc4B,GAAd,CAAP;AACT,UAAIsB,MAAM,CAAClD,KAAX,EAAkB,OAAO6B,OAAO,CAAC7B,KAAR,CAAckD,MAAM,CAAClD,KAArB,CAAP;AAClB6B,MAAAA,OAAO,CAACC,GAAR,CAAYoB,MAAZ;AACD,KATD;AAUD,GAfD;AAgBD,CAlBD;;AAsBA,IAAMC,UAAU,GAAG,iEAAiE;AAAC9D,EAAAA,IAAI,EAAJA;AAAD,CAApF;;AAEA,SAASiC,WAAT,GAAuB;AAErB,SAAO3B,gBAAgB,CAAC,UAAAE,IAAI;AAAA,WAAK;AACjCuD,MAAAA,GAAG,EAAED,UAD4B;AAEjCL,MAAAA,MAAM,EAAE,KAFyB;AAGjCjD,MAAAA,IAAI,EAAJA;AAHiC,KAAL;AAAA,GAAL,CAAvB;AAKD;;AAED,eAAe,SAASwD,UAAT,CAAoBC,KAApB,EAA2B;AAAA,mBACR/E,QAAQ,CAAC,8BAAD,CADA;AAAA;AAAA,MACjCgF,QADiC;AAAA,MACvBC,WADuB;;AAAA,mBAEhBjF,QAAQ,CAAC,EAAD,CAFQ;AAAA;AAAA,MAEjCc,IAFiC;AAAA,MAE3BoE,OAF2B;;AAIxC,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAChD,KAAD,EAAW;AAClC,QAAGA,KAAK,CAACiD,GAAN,IAAa,OAAb,IAAuBjD,KAAK,CAACkD,OAAN,IAAiB,EAA3C,EAA+C;AAC7CtC,MAAAA,WAAW;AACZ;AACF,GAJC;;AAMF,SACI;AAAA;AAAA,KACA;AAAA,wCAAe;AAAf,KACI;AAAA,wCAAe;AAAf,KACA;AAAM,IAAA,EAAE,EAAC,gBAAT;AAAA;AAAA,KACA;AAAA,wCAAkB;AAAlB,KACE;AAAQ,IAAA,KAAK,EAAC,UAAd;AAAA;AAAA,gBADF,EAEE;AAAQ,IAAA,KAAK,EAAC,UAAd;AAAA;AAAA,gBAFF,CADA,EAKA;AACA,IAAA,IAAI,EAAG,MADP;AAAA,wCAAiB;AAAjB,IALA,EASA;AAAiC,IAAA,OAAO,EAAC,QAAzC;AAAA,wCAAkB;AAAlB,cATA,EAWS;AAAwB,IAAA,GAAG,EAAC,4BAA5B;AAAyD,IAAA,MAAM,EAAC,IAAhE;AAAqE,IAAA,KAAK,EAAC,IAA3E;AAAgF,IAAA,KAAK,EAAC,QAAtF;AAA+F,IAAA,GAAG,EAAC,EAAnG;AAAA,wCAAe;AAAf,IAXT,CADA,EAgBA;AAAA;AAAA,IAhBA,EAiBA;AAA+B,IAAA,IAAI,EAAC,UAApC;AAA+C,IAAA,KAAK,EAAEiC,QAAtD;AAAgE,IAAA,QAAQ,EAAE,kBAAAZ,CAAC;AAAA,aAAIa,WAAW,CAACb,CAAC,CAAC7B,MAAF,CAAS+C,KAAV,CAAf;AAAA,KAA3E;AAA4G,IAAA,UAAU,EAAEH,cAAxH;AAAA,wCAAiB;AAAjB,IAjBA,EAkBA;AAAA;AAAA,KAAG;AAAQ,IAAA,OAAO,EAAEpC,WAAjB;AAAuD,IAAA,MAAM,MAA7D;AAAA,wCAAwC;AAAxC,eAAH,EAAkF;AAAwB,IAAA,GAAG,EAAC,4BAA5B;AAAyD,IAAA,MAAM,EAAC,IAAhE;AAAqE,IAAA,KAAK,EAAC,IAA3E;AAAgF,IAAA,KAAK,EAAC,QAAtF;AAA+F,IAAA,GAAG,EAAC,EAAnG;AAAA,wCAAe;AAAf,IAAlF,CAlBA,CADJ,CADA;AAAA;AAAA,q+mBADJ;AAyOK","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from 'axios';\r\nimport { deflateSync } from 'zlib';\r\nimport Web3 from 'web3';\r\nimport Fortmatic from 'fortmatic';\r\nimport useUrsula from \"../useUrsula\";\r\nimport useFetch from \"../useFetch\";\r\n\r\nvar web3;\r\nvar state;\r\nvar captureFile;\r\nvar onSubmit;\r\nvar uploadFile;\r\nvar hash;\r\n\r\nvar address;\r\nlet fm = new Fortmatic('pk_test_F4970AF6BBC7F0C1');\r\n\r\nif (process.browser) {\r\n  web3 = new Web3(fm.getProvider());\r\n}\r\n\r\n\r\nfunction useAsyncEndpoint(fn) {\r\n  const [res, setRes] = useState({\r\n    data: null,\r\n    pending: deflateSync,\r\n    completed: false,\r\n    error: false,\r\n  });\r\n  const [req, setReq] = useState();\r\n\r\n  state = {\r\n    ipfsHash:null,\r\n    buffer:'',\r\n    ethAddress:'',\r\n    transactionHash:'',\r\n    txReceipt: ''\r\n  };\r\n\r\n//Take file input from user\r\n captureFile =(event) => {\r\n      event.stopPropagation()\r\n      event.preventDefault()\r\n      const file = event.target.files[0]\r\n      let reader = new window.FileReader()\r\n      reader.readAsArrayBuffer(file)\r\n      reader.onloadend = () => this.convertToBuffer(reader)\r\n    };\r\n\r\n\r\ndecryptData = useFetch(\"http://ec2-18-204-34-34.compute-1.amazonaws.com:5000/decrypt\" + {hash});\r\n\r\nonSubmit = async (event) => {\r\n      event.preventDefault();\r\n      const accounts = await web3.eth.getAccounts();\r\n    //save document to IPFS,return its hash#, and set hash# to state\r\n      await ipfs.add(this.state.buffer, (err, ipfsHash) => {\r\n        console.log(err,ipfsHash);\r\n        //setState by setting ipfsHash to ipfsHash[0].hash\r\n        this.setState({ ipfsHash:ipfsHash[0].hash });\r\n        storehash.methods.sendHash(this.state.ipfsHash).send({\r\n          from: accounts[0]\r\n        }, (error, transactionHash) => {\r\n          console.log(transactionHash);\r\n          this.setState({transactionHash});\r\n        });\r\n      })\r\n    };\r\n  \r\n  useEffect(() => {\r\n    if (!req) return;\r\n    setRes({\r\n      data: null,\r\n      pending: true,\r\n      completed: false,\r\n      error: false,\r\n    });\r\n  axios(req)\r\n  .then(res =>\r\n    setRes({\r\n      data: res.data,\r\n      pending: false,\r\n      error: false,\r\n      complete: true\r\n    }),\r\n  )\r\n  .catch(() =>\r\n    setRes({\r\n      data: null,\r\n      pending: false,\r\n      error: true,\r\n      complete: true\r\n    }),\r\n  );\r\n}, [req]\r\n);\r\nreturn [res, (...args) => setReq(fn(...args))];\r\n\r\n}\r\n\r\nfunction retrieveData() {\r\n\r\n  return us\r\n}\r\n\r\nlet handlePersonalSign = (e) => {\r\n  let message = message;\r\n  web3.eth.getAccounts((err, accounts) => {\r\n    if (err) return console.error(err);\r\n    var from = accounts[0];\r\n    var params = [message, from];\r\n    var method = 'personal_sign';\r\n    web3.currentProvider.sendAsync({\r\n      id: 1,\r\n      method,\r\n      params,\r\n      from,\r\n    }, (err, result) => {\r\n      if (err) return console.error(err);\r\n      if (result.error) return console.error(result.error);\r\n      console.log(result);\r\n    })\r\n  });\r\n};\r\n\r\n\r\n\r\nconst decryptAPI = \"http://ec2-18-204-34-34.compute-1.amazonaws.com:5000/decrypt\" + {hash};\r\n\r\nfunction decryptData() {\r\n  \r\n  return useAsyncEndpoint(data => ({\r\n  url: decryptAPI,\r\n  method: \"GET\",\r\n  data\r\n}));\r\n}\r\n\r\nexport default function DecryptBar(props) {\r\n  const [password, setPassword] = useState(\"Public Key for re-encryption\");\r\n  const [hash, setHash] = useState(\"\")\r\n\r\n  const handleKeyPress = (event) => {\r\n  if(event.key == 'Enter'|| event.keyCode == 13) {\r\n    decryptData();\r\n  }\r\n}\r\n\r\nreturn (\r\n    <section>\r\n    <div className=\"row\">\r\n        <div className=\"column\">\r\n        <form id=\"ipfs-hash-form\">\r\n        <select className=\"policyDropdown\">\r\n          <option value=\"policy-1\">Policy-1</option>\r\n          <option value=\"policy-2\">Policy-2</option>\r\n        </select>\r\n        <input className=\"ipfsInput\"\r\n        type = \"file\"\r\n      \r\n        />\r\n        <button className=\"policyButton\" onClick=\"upload\"> \r\n        Upload\r\n        </button><img className=\"center\" src=\"../static/verification.png\" height=\"28\" width=\"28\" align=\"middle\" alt=\"\"/>\r\n        \r\n        </form>\r\n        \r\n        <br/>\r\n        <input className=\"message-box\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} onKeyPress={handleKeyPress}  /> \r\n        <a><button onClick={decryptData} className=\"policyButton\" invert >Decrypt</button><img className=\"center\" src=\"../static/verification.png\" height=\"28\" width=\"28\" align=\"middle\" alt=\"\"/></a>\r\n        </div>\r\n        \r\n        </div>\r\n        <style jsx>{`\r\n\r\n      .column {\r\n        text-align: center;\r\n        border-width: 1px;\r\n        list-style: none;\r\n        padding-bottom: 8px;\r\n        padding-top: 8px;\r\n        margin-right: 28px;\r\n      }\r\n\r\n      .center {\r\n        margin-left: 3px;\r\n        margin-bottom: 10px;\r\n      }\r\n\r\n      .to {\r\n        width: 260px;\r\n        padding-bottom: 8px;\r\n        padding-top: 8px;\r\n        border: 1px solid #d0d4d9; \r\n        border-radius: .375rem;\r\n        -webkit-box-shadow: inset 0 -1px 0 0 rgba(100,121,143,0.122);\r\n        box-shadow: inset 0 -1px 0 0 rgba(100,121,143,0.122);\r\n        line-height: 20px;\r\n        min-height: auto; \r\n        padding-left: 0; \r\n        padding-right: 0;\r\n      }\r\n\r\n      .policyButton {\r\n        -webkit-appearance: none;\r\n        position: relative;\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n        text-transform: uppercase;\r\n        text-align: center;\r\n        line-height: 0;\r\n        white-space: nowrap;\r\n        width: 120px;\r\n        height: 30px;\r\n        margin-left: 8px;\r\n        font-weight: 500;\r\n        font-size: 12px;\r\n        color: rgb(102, 102, 102);\r\n        background-color: rgb(255, 255, 255);\r\n        user-select: none;\r\n        cursor: pointer;\r\n        text-decoration: none;\r\n        padding: 0px 10px;\r\n        margin-bottom: 2px;\r\n        border-radius: 5px;\r\n        border-width: 1px;\r\n        border-style: solid;\r\n        border-color: rgb(234, 234, 234);\r\n        border-image: initial;\r\n        transition: all 0.2s ease 0s;\r\n        overflow: hidden;\r\n        outline: none;\r\n      }\r\n\r\n      .policyDropdown {\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n        text-transform: uppercase;\r\n        text-align: center;\r\n        line-height: 0;\r\n        white-space: nowrap;\r\n        width: 120px;\r\n        height: 30px;\r\n        margin-left: 8px;\r\n        font-weight: 500;\r\n        font-size: 12px;\r\n        color: rgb(102, 102, 102);\r\n        background-color: rgb(255, 255, 255);\r\n        user-select: none;\r\n        cursor: pointer;\r\n        text-decoration: none;\r\n        padding: 0px 10px;\r\n        margin-bottom: 2px;\r\n        border-radius: 5px;\r\n        border-width: 1px;\r\n        border-style: solid;\r\n        border-color: rgb(234, 234, 234);\r\n        border-image: initial;\r\n        transition: all 0.2s ease 0s;\r\n        overflow: hidden;\r\n        outline: none;\r\n      }\r\n\r\n      \r\n      .ipfsInput {\r\n        -webkit-appearance: none;\r\n        position: relative;\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n        text-transform: uppercase;\r\n        text-align: center;\r\n        line-height: 0;\r\n        white-space: nowrap;\r\n        width: 300px;\r\n        height: 30px;\r\n        margin-left: 8px;\r\n        font-weight: 500;\r\n        font-size: 12px;\r\n        color: #000;\r\n        user-select: none;\r\n        cursor: pointer;\r\n        text-decoration: none;\r\n        padding: 0px 10px;\r\n        margin-bottom: 2px;\r\n        border-radius: 5px;\r\n        border-width: 1px;\r\n        border-style: solid;\r\n        border-color: rgb(234, 234, 234);\r\n        border-image: initial;\r\n        transition: all 0.2s ease 0s;\r\n        overflow: hidden;\r\n        outline: none;\r\n        \r\n      }\r\n\r\n      .message-box {\r\n        padding-bottom: 28px;\r\n        width: 800px ;\r\n        overflow: auto;\r\n        margin: 0; \r\n        min-height: 42px; \r\n        height: 38px; \r\n        max-height: 180px; \r\n        border: 2px solid rgba(134,134,134,.7);\r\n        border-radius: .375rem;\r\n        outline: 0;\r\n        background: #fff;\r\n        resize: none;\r\n        box-shadow: none;\r\n        color: #1d1c1d;\r\n        -webkit-user-select: auto;\r\n        -moz-user-select: auto;\r\n        -ms-user-select: auto;\r\n        user-select: auto;\r\n        padding: 9px 30px 10px 50px;\"\r\n      }\r\n\r\n      .login {\r\n        color: #FFF;\r\n      }\r\n\r\n      .account {\r\n        font-size: 13px;\r\n        line-height: 1.91667;\r\n        font-weight: 400;\r\n        color: #3d464d;\r\n        border: 1px solid #bdc4c9;\r\n        padding: 3.5px 7px;\r\n        border-radius: 4px;\r\n        margin-top: 28px;\r\n        margin-left: 8px;\r\n      }\r\n\r\n      .row {\r\n        flex-direction: column;\r\n        margin: -1.5rem 0;\r\n        text-align: center;\r\n      }\r\n\r\n      // CSS only media query for tablet\r\n      @media screen and (max-width: 960px) {\r\n        .row {\r\n          flex-direction: column;\r\n          margin: -1.5rem 0;\r\n        }\r\n        .column {\r\n          width: 10%;\r\n          padding: 1.5rem 0;\r\n          text-align: center;\r\n          max-width: 100px;\r\n        }\r\n\r\n        .message-box {\r\n          padding-bottom: 28px;\r\n          width: 100px;\r\n          overflow: auto;\r\n          margin: 0; \r\n          min-height: 42px; \r\n          height: 38px; \r\n          max-height: 180px; \r\n          border: 2px solid rgba(134,134,134,.7);\r\n          border-radius: .375rem;\r\n          outline: 0;\r\n          background: #FFFFFF;\r\n          resize: none;\r\n          box-shadow: none;\r\n          color: #1d1c1d;\r\n          -webkit-user-select: auto;\r\n          -moz-user-select: auto;\r\n          -ms-user-select: auto;\r\n          user-select: auto;\r\n          padding: 9px 30px 10px 50px;\r\n          display: none;\r\n        }\r\n\r\n        \r\n      }\r\n    `}</style>\r\n        </section>\r\n)\r\n\r\n    }\r\n"]},"metadata":{},"sourceType":"module"}